version: '3.8'

services:
  markdown-vault:
    build: .
    image: markdown-vault:latest
    container_name: markdown-vault
    ports:
      - "27123:27123"
    volumes:
      # Mount your vault directory
      - ./vault:/vault
      # Mount configuration
      - ./config:/config
      # Mount SSL certificates (will be auto-generated if not present)
      - ./certs:/certs
      # Mount logs
      - ./logs:/logs
    environment:
      # Optional: Set API key via environment variable
      - MARKDOWN_VAULT_API_KEY=${MARKDOWN_VAULT_API_KEY:-}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-k", "-f", "https://localhost:27123/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
